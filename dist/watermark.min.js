var watermarkObj=function(t){"use strict";function e(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function n(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function r(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var i=function(t){for(var e=t.str,n=t.ctx,r=t.initX,i=t.initY,o=t.lineHeight,a=(t.canvasWidth,0),c=0;c<e.length;c++)n.measureText(e[c]).width,c==e.length-1&&n.fillText(e.substring(a,c+1),r,i),"-"==e[c]&&(0,n.fillText(e.slice(a,c),r,i),i+=o,a=c+1)},o=function(t,e){var n=null;n=t?document.querySelector(t):document.body;var r=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;return!!r&&(new r(e).observe(n,{childList:!0,attributes:!0,characterData:!0,subtree:!0,attributeOldValue:!0,characterDataOldValue:!0}),!0)},a={id:"wm_div_id",text:"测试水印",transparency:.15,fontSize:16,parentLeft:0,parentTop:0,parentRight:0,parentBottom:0,singleWidth:200,singleHeight:200,slope:-15,zIndex:9999,parentSelector:null};function c(t){var r=function(t){for(var r=1;r<arguments.length;r++){var i=null!=arguments[r]?arguments[r]:{};r%2?n(i,!0).forEach((function(n){e(t,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):n(i).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}({},a,{},t);l.set(r.id,r);var o=null;if(r.parentSelector?(o=document.querySelector(r.parentSelector)).style.position="relative":o=document.body,!document.getElementById(r.id)){var c=document.createElement("canvas"),s=document.createElement("div"),u=c.getContext("2d"),d=r.slope*Math.PI/180;c.id="watermarkCanvasId",c.width=r.singleWidth,c.height=r.singleHeight,u.font="normal ".concat(r.fontSize,"px 'Microsoft Yahei','serif','sans-serif'"),u.fillStyle="rgba(112, 113, 114, ".concat(r.transparency,")"),u.translate(c.width/2,c.height/2),u.rotate(d),u.translate(-c.width/2,-c.height/2),u.textAlign="center";var p=r.fontSize+r.fontSize/3,f=Math.ceil(Math.abs(Math.sin(d)*r.singleHeight))+r.fontSize/3,g={str:r.text,ctx:u,initX:r.singleWidth/2,initY:f,lineHeight:p,canvasWidth:r.singleWidth};i(g);var h=c.toDataURL("image/png");s.id=r.id,s.style.position="absolute",s.style.zIndex=r.zIndex,s.style.top="".concat(r.parentTop,"px"),s.style.right="".concat(r.parentRight,"px"),s.style.bottom="".concat(r.parentBottom,"px"),s.style.left="".concat(r.parentLeft,"px"),s.style.pointerEvents="none",s.style.backgroundImage="URL("+h+")",o.appendChild(s)}}var l=new Map;return t.customSettingMap=l,t.getSingleWH=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=t.split("-").map((function(t){return function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charAt(n);/[\u4e00-\u9fa5]/.test(r)?e+=2:e+=1}return e}(t)})),o=Math.max.apply(Math,r(i)),a={width:7.5*o*(1+(100-e)/100*n),height:6*o*(1+(100-e)/100*n)};return function(t){return a[t]}},t.getWatermarkConfig=function(t){return l.get(t)},t.removeWatermark=function(t){var e=document.getElementById(t);e&&e.parentNode.removeChild(e)},t.watermark=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};c(t),window.addEventListener("resize",(function(){c(t)}));var e=t.id||a.id,n=t.parentSelector||a.parentSelector;o(n,(function(n,r){n[0].removedNodes[0]&&n[0].removedNodes[0].id===e&&c(t)}))||observeNode.addEventListener("DOMNodeRemoved",(function(){c(t)}),!1)},t}({});
